# Subtitle Editor - Paragraph Format Update

## тЬЕ IMPROVEMENT: Single Text Area

### **Before (Individual Boxes):** тЭМ

```
#1 [Text box for subtitle 1]
00:00:00 тЖТ 00:00:01

#2 [Text box for subtitle 2]  
00:00:01 тЖТ 00:00:02

#3 [Text box for subtitle 3]
00:00:02 тЖТ 00:00:03

... (20 separate input boxes)
```

**Problems:**
- Hard to see flow of text
- Lots of scrolling
- Can't edit all at once
- Only shows first 20

---

### **After (Paragraph Format):** тЬЕ

```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ Edit All Subtitles (One Per Line):     тФВ
тФЬтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФд
тФВ                                         тФВ
тФВ рдХреА рд░реЛрд▓ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзреНрдпрд╛рди рд╕реЗ рдкреНрд░рд╢реНрди рдХреБрдЫтФВ
тФВ рд╕реЗ рд╣рдореЗрдВ рдЬреЗрдирдВрдж рдореЗрдВ рдорд┐рд▓рд╛ рд╣рдорд╛рд░реЗ рдкреВрд░реНрд╡рдЬ    тФВ
тФВ рдЙрд╕рдХреА рд╕рд╛рдлрд╝реА рдкреВрдЬрд╛ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ             тФВ
тФВ рд▓рдЧрднрдЧ 20-25 рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╡рд╣рд╛рдБ рдкрд░ рдЖрдЧрдорди   тФВ
тФВ рдЙрди рд╕рднрд╕рдд 20-25 рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╕рд╛рдердзрд░реНрдорд┐рдХ   тФВ
тФВ рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджреВрд░ рд╕реЗ рджрд░реНрд╢рди                  тФВ
тФВ рдЬрд┐рд╕рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ рдРрд╕рд╛ рдордВрджрд┐рд░реЛрдВ               тФВ
тФВ рдмрдирд╛рдПрдВ рдХреНрдпрд╛ рдмрдпрд╛рдВ рдордВрджрд┐рд░реЛрдВ                 тФВ
тФВ ...                                     тФВ
тФВ                                         тФВ
тФВ (Scrollable - shows ALL subtitles)     тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ

[ЁЯТ╛ Save Edited Subtitles]  [ЁЯФД Restore Original]
```

**Benefits:**
- тЬЕ See all text together (like a document)
- тЬЕ Easy to read flow
- тЬЕ Edit anywhere with scroll
- тЬЕ Shows ALL subtitles (not just 20)
- тЬЕ Copy/paste friendly
- тЬЕ Find & replace works

---

## ЁЯУЛ How To Use

### **Method 1: Edit Directly**

1. **Open "тЬПя╕П Edit Subtitles"**
2. **See all subtitles in one text area**
3. **Click inside and edit:**
   - Use arrow keys to navigate
   - Find & replace (Ctrl+F)
   - Select, cut, copy, paste
   - Fix mistakes anywhere
4. **Click "ЁЯТ╛ Save"**
5. **Video regenerates with corrections**

---

### **Method 2: Copy-Paste-Edit**

1. **Select all text** (Ctrl+A)
2. **Copy to external editor** (VS Code, Notepad++)
3. **Use advanced find & replace**
   - Example: Replace all "рджрд░ рд╕реЗ" with "рджреВрд░ рд╕реЗ"
4. **Copy edited text back**
5. **Paste into text area**
6. **Click "ЁЯТ╛ Save"**

---

## ЁЯТб Format Rules

### **IMPORTANT:** Each line = One subtitle

**Correct:**
```
рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджреВрд░ рд╕реЗ рджрд░реНрд╢рди
рдЬрд┐рд╕рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ рдРрд╕рд╛ рдордВрджрд┐рд░реЛрдВ
рдмрдирд╛рдПрдВ рдХреНрдпрд╛ рдмрдпрд╛рдВ рдордВрджрд┐рд░реЛрдВ
```
тЬЕ 3 lines = 3 subtitles

**Also works:**
```
рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджреВрд░ рд╕реЗ рджрд░реНрд╢рди
рдЬрд┐рд╕рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ рдРрд╕рд╛ рдордВрджрд┐рд░реЛрдВ

рдмрдирд╛рдПрдВ рдХреНрдпрд╛ рдмрдпрд╛рдВ рдордВрджрд┐рд░реЛрдВ
```
тЬЕ Empty lines ignored

**Wrong:**
```
рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджреВрд░ рд╕реЗ рджрд░реНрд╢рди рдЬрд┐рд╕рдХреЗ рд╣реЛрддреЗ рд╣реИрдВ рдРрд╕рд╛ рдордВрджрд┐рд░реЛрдВ рдмрдирд╛рдПрдВ рдХреНрдпрд╛ рдмрдпрд╛рдВ рдордВрджрд┐рд░реЛрдВ
```
тЭМ 1 line тЙа 3 subtitles!

---

## тЪая╕П Warnings

### **Line Count Changes:**

If you add/remove lines, you'll see:

```
тЪая╕П Line count changed! Original: 45, Edited: 47
Each subtitle should be on its own line. Empty lines will be skipped.
```

**What happens:**
- Extra lines ignored (timing preserved)
- Missing lines keep original text
- Empty lines skipped

**Recommendation:** Don't add/remove lines, just edit existing text!

---

## ЁЯОи Visual Comparison

### **Old UI (20 Inputs):**
```
Subtitle 1: [Text box                    ]
Subtitle 2: [Text box                    ]
Subtitle 3: [Text box                    ]
...
Subtitle 20: [Text box                   ]
+ 25 more subtitles (showing first 20 for editing)
```
тЭМ Can't see or edit the other 25!

---

### **New UI (One Text Area):**
```
тФМтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФР
тФВ Line 1                                 тФВ
тФВ Line 2                                 тФВ
тФВ Line 3                                 тФВ
тФВ ...                                    тФВ
тФВ Line 45  тЖР Can edit ALL 45!            тФВ
тФВ                                        тФВ
тФВ [Scrollable]                           тФВ
тФФтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФАтФШ
```
тЬЕ All 45 subtitles editable!

---

## ЁЯЪА Pro Tips

### **1. Bulk Find & Replace:**

**Scenario:** Whisper always writes "рджрд░" instead of "рджреВрд░"

**Steps:**
1. Click in text area
2. Press Ctrl+H (browser find & replace)
3. Find: `рджрд░ рд╕реЗ`
4. Replace: `рджреВрд░ рд╕реЗ`
5. Click Replace All
6. Done! тЬЕ

---

### **2. External Editor:**

**For complex edits:**
1. Select all (Ctrl+A)
2. Copy (Ctrl+C)
3. Open VS Code
4. Paste
5. Use powerful find/replace with regex
6. Copy edited text
7. Paste back into text area
8. Save

---

### **3. Quick Scan:**

**Check for errors:**
- Scroll through entire text
- Look for obvious mistakes
- Common errors:
  - Extra spaces
  - Wrong words
  - Repeated text
  - Missing words

---

## ЁЯФз Technical Details

### **How It Works:**

**On Load:**
```python
# Extract all subtitle text
paragraph_text = "\n".join([seg['text'] for seg in segments])

# Show in text area
st.text_area(value=paragraph_text, height=400)
```

**On Save:**
```python
# Split edited text by lines
edited_lines = edited_paragraph.split('\n')

# Map back to original timing
for i, line in enumerate(edited_lines):
    segments[i]['text'] = line.strip()

# Write SRT with new text, same timing
```

**Result:** Only text changes, timing preserved!

---

### **Change Detection:**

```python
changes_made = (edited_paragraph != paragraph_text)
```

- Compares entire text
- Enables/disables Save button
- Efficient (no per-line comparison)

---

## ЁЯУК Performance

| Aspect | Old (20 Inputs) | New (Text Area) | Better? |
|--------|----------------|-----------------|---------|
| **Visible** | First 20 only | All subtitles | тЬЕ |
| **Editing** | Click each box | Continuous text | тЬЕ |
| **Find/Replace** | Manual | Browser Ctrl+F | тЬЕ |
| **Copy/Paste** | One at a time | All at once | тЬЕ |
| **Load Time** | Slow (20 widgets) | Fast (1 widget) | тЬЕ |
| **UX** | Tedious | Smooth | тЬЕ |

---

## ЁЯОп Example Workflow

### **Fixing Common Whisper Errors:**

**Original (from Whisper):**
```
рдХреА рд░реЛрд▓ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзреНрдпрд╛рди рд╕реЗ рдкреНрд░рд╢реНрди рдХреБрдЫ
рд╕реЗ рд╣рдореЗрдВ рдЬреЗрдирдВрдж рдореЗрдВ рдорд┐рд▓рд╛ рд╣рдорд╛рд░реЗ рдкреВрд░реНрд╡рдЬ
рдЙрд╕рдХреА рд╕рд╛рдлрд╝реА рдкреВрдЬрд╛ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ
рд▓рдЧрднрдЧ 20-25 рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╡рд╣рд╛рдБ рдкрд░ рдЖрдЧрдорди
рдЙрди рд╕рднрд╕рдд 20-25 рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╕рд╛рдердзрд░реНрдорд┐рдХ
рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджрд░ рд╕реЗ рджрд░реНрд╢рди
```

**Errors identified:**
- "рдЬреЗрдирдВрдж" тЖТ "рдЬреИрдиреЗрдиреНрджреНрд░"
- "рд╕рд╛рдлрд╝реА" тЖТ "рд╕рд╛рдзреБ"
- "рдЬрд╛рд░" тЖТ "рд╣рдЬрд╛рд░"
- "рд╕рднрд╕рдд" тЖТ "рд╕рдорд╕реНрдд"
- "рд╕рд╛рдердзрд░реНрдорд┐рдХ" тЖТ "рд╕рд╛рдзрд╛рд░реНрдорд┐рдХ"
- "рджрд░ рд╕реЗ" тЖТ "рджреВрд░ рд╕реЗ"

**Fixed:**
```
рдХреА рд░реЛрд▓ рджреЗрдЦрдиреЗ рдХреЗ рд▓рд┐рдП рдЕрдзреНрдпрд╛рди рд╕реЗ рдкреНрд░рд╢реНрди рдХреБрдЫ
рд╕реЗ рд╣рдореЗрдВ рдЬреИрдиреЗрдиреНрджреНрд░ рдореЗрдВ рдорд┐рд▓рд╛ рд╣рдорд╛рд░реЗ рдкреВрд░реНрд╡рдЬ
рдЙрд╕рдХреА рд╕рд╛рдзреБ рдкреВрдЬрд╛ рдХрд╛ рдЕрд╡рд╕рд░ рд╣реИ
рд▓рдЧрднрдЧ 20-25 рд╣рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╡рд╣рд╛рдБ рдкрд░ рдЖрдЧрдорди
рдЙрди рд╕рдорд╕реНрдд 20-25 рд╣рдЬрд╛рд░ рд▓реЛрдЧреЛрдВ рдХрд╛ рд╕рд╛рдзрд╛рд░реНрдорд┐рдХ
рджреЗрдиреЗ рд╡рд╛рд▓рд╛ рджреВрд░ рд╕реЗ рджрд░реНрд╢рди
```

**Time taken:** 2-3 minutes (instead of 10-15 with old UI!)

---

## ЁЯУБ Files Modified

**Updated:**
- тЬЕ `app.py` - Replaced individual inputs with text area

**Changes:**
- Removed loop creating 20 input boxes
- Added single text area (400px height)
- Added line-by-line parsing on save
- Added line count warning
- Simplified change detection

---

## ЁЯОК Summary

**Problem:** Individual text boxes tedious to edit

**Solution:** Single text area with all subtitles

**Benefits:**
- тЬЕ See all text together
- тЬЕ Edit like a document
- тЬЕ Use Ctrl+F find/replace
- тЬЕ Copy/paste workflows
- тЬЕ Faster editing
- тЬЕ Better UX

**Format:** One subtitle per line

---

**Refresh browser to see the new editor!** ЁЯФД

**Ab subtitle editing bahut easy hai!** ЁЯУЭтЬи

---

**Version: 2.3 (Paragraph-Style Subtitle Editor)**  
**Date: 2024**
